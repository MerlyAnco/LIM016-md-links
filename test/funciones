import {
    absolutePath,
    comprovePath,
    readDirectory,
    arrFilesMd,
    readArrFile,
    getLinks,
    pathValido,
    linksStatus,
} from '../src/funciones.js'

describe('pathValido', () => {
  it('pathValido is a function', () => {
    expect(typeof absolutePath).toBe('function');
  });
  it('should be true', () => {
    expect(pathValido('test/prueba-test')).toBe(true);
  });
  it('should be false', () => {
    expect(pathValido('test/prueba')).toBe(false);
  });
});

describe('absolutePath', () => {
  it('absolutePath is a function', () => {
    expect(typeof absolutePath).toBe('function');
  });
  it('should be "C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test"', () => {
    expect(absolutePath('test/prueba-test')).toBe("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test");
  });
  it('should be "C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test"', () => {
    expect(absolutePath("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test")).toBe("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test");
  });
});

describe('comprovePath', () => {
  it('comprovePath is a function', () => {
    expect(typeof comprovePath).toBe('function');
  });

  it('should be true', () => {
    expect(comprovePath("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\link2.md")).toBe(true);
  });
  it('should be false', () => {
    expect(comprovePath("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2")).toBe(false);
  });
});

describe('readDirectory', () => {
  it('readDirectory is a function', () => {
    expect(typeof readDirectory).toBe('function');
  });
  it('readDirectory is a ', () => {
    expect(readDirectory("C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2")).toStrictEqual(["C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\link2.md", "C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\texto.text"]);
  });
});

describe('arrFilesMd', () => {
  it('arrFilesMd is a function', () => {
    expect(typeof arrFilesMd).toBe('function');
  });
  it('arrFilesMd is a ', () => {
    expect(arrFilesMd(["C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\link2.md", 
    "C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\texto.text"])).toStrictEqual(["C:\\Users\\N24\\Desktop\\proyecto 4\\LIM016-md-links\\test\\prueba-test\\carpeta-prueba2\\link2.md"]);
  });
});

describe('readArrFile', () => {
  it('readArrFile is a function', () => {
    expect(typeof readArrFile).toBe('function');
  });
  it('should be ', () => {
    expect(typeof readArrFile(["test\\prueba-test\\carpeta-prueba2\\link2.md"])).toBe("object");
});
  it('should be ', () => {
    expect(readArrFile(["test\\prueba-test\\carpeta-prueba2\\link2.md"])).toStrictEqual([{"content": "[Generalidades del protocolo HTTP - MDN](https://developer.mozilla.org/es/docs/Web/HTTP/Overview)", "path": "test\\prueba-test\\carpeta-prueba2\\link2.md"}]);
  });
});


const obj =  [{"content": "[Generalidades del protocolo HTTP - MDN](https://developer.mozilla.org/es/docs/Web/HTTP/Overview)", "path": "test\\prueba-test\\carpeta-prueba2\\link2.md"}];

describe('getLinks', () => {
  it('getLinks is a function', () => {
    expect(typeof getLinks).toBe('function');
  });
  it('should be ', () => {
    expect(getLinks(obj)).toStrictEqual([{"file": "test\\prueba-test\\carpeta-prueba2\\link2.md", "href": "https://developer.mozilla.org/es/docs/Web/HTTP/Overview", "text": "Generalidades del protocolo HTTP - MDN"}]);
})
});

const arrLinks = [{"file": "test\\prueba-test\\carpeta-prueba2\\link2.md", "href": "https://developer.mozilla.org/es/docs/Web/HTTP/Overview", "text": "Generalidades del protocolo HTTP - MDN"},{"file": "test\\prueba-test\\carpeta-prueba2\\link2.md", "href": "https://developer.mozirtylla.org/es/docs/Web/HTTP/Overview", "text": "Generalidades del protocolo HTTP - MDN"}]
describe('linksStatus', () => {
  it('linksStatus is a function', () => {
    expect(typeof linksStatus).toBe('function');
  });
  it('linkStatus', () =>{
    expect(linksStatus(arrLinks)).resolves.toStrictEqual([{"file": "test\\prueba-test\\carpeta-prueba2\\link2.md", "href": "https://developer.mozilla.org/es/docs/Web/HTTP/Overview", "message": "ok", "status": 200, "text": "Generalidades del protocolo HTTP - MDN"}, {"file": "test\\prueba-test\\carpeta-prueba2\\link2.md", "href": "https://developer.mozirtylla.org/es/docs/Web/HTTP/Overview", "message": "fail", "status": "Don't answer", "text": "Generalidades del protocolo HTTP - MDN"}])
  })
});

